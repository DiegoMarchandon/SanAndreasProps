<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>San Andreas Props</title>
    <link rel="icon" href="imagenes/ICOfavicon.png">
    <link rel="stylesheet" type="text/css" href="stylesMain.css">
    <link rel="stylesheet" href="viewStyles.css">
</head>
<body>
    <!-- para mostrar las distintas opciones de la barra de navegación, puedo habilitar un div y esconder los demás con onclick y onload -->
    <div class="contenido-envuelto">
        <div id="navbar">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="propiedades.html">Propiedades</a></li>
                <!-- <li><a href="Nosotros.html">Nosotros</a></li> -->
                <li><a href="Mapa.html">Mapa</a></li>
                <li><a href="formulario.html" class="admSesion">Iniciar Sesión</a></li>
            </ul>
            
        </div>
        <div id="home">
    
            <h1><strong>San Andreas Properties</strong></h1>    
    
            <div class="buscarCiudad">
                <div id="button-container">
                    <button id="buton1" onclick="verPropuesta(this)">ver <br> Localidades</button>
                    <button id="buton2" onclick="verPropuesta(this)">ver <br> Emprendimientos</button>
                    <button id="buton3" onclick="verPropuesta(this)">ver <br> Alquileres</button>
                    <button id="buton4" onclick="verPropuesta(this)">ver <br> Propiedades</button>
                </div>
                <div id="form-container">
                    <form id="searchForm">
                        <input type="text" name="eleccion" id="eleccion" placeholder="dónde quisieras mudarte">
                        <select name="tipoPropiedad" id="ciudadOption">
                            <option value="Todas las localidades">Todas las localidades</option>
                            <option value="San Fierro">San Fierro</option>
                            <option value="Los Santos">Los Santos</option>
                            <option value="Las Venturas">Las Venturas</option>   
                        </select>
                        <!-- <input type="submit" value="Buscar"> onclick=return propiedades() -->
                        <button class="search-button" type="submit">
                            <span class="search-icon"></span>
                        </button>
                    </form>
                    <div id="sugerenciasZonas">
                        
                    </div>
                </div>
            </div>

            <div id="seccionElegida">

                <!-- ver ciudades -->
                <!-- <div class="ciudades" style="display: none">

                    <div class="ciudad fontLS" style="display: none">
                        <div class="losSantos">
                                <div id="descripcionLS">
                                    <img src="imagenes/losSantos.png" alt="letra los santos" id="LSfuente">
                                    
                                    <p>Ciudad con precios más accesibles y la más fácil para adaptarse. Propiedades sospechosamente baratas
                                        <br><br><u><b>ver propiedades en Los Santos</b></u>
                                    </p>
                                    
                                </div>
                        </div>
                    </div>
        
                    <div class="ciudad fontSF" style="display: none">
                        <div class="sanFierro" >
                            <a href="SanFierro.html">
                                <div id="descripcionSF">
                                    <img src="imagenes/sanFierro.png" alt="letra san fierro" id="SFfuente">
                                    
                                    <p>Ciudad con mayor variedad de precios, propiedades y actividades. Viviendas desde lo bohemio hasta lo elegante.
                                        Espacio para todos los estilos de vida.
                                        <br><br><u><b>ver propiedades en San Fierro</b></u>
                                    </p>
                                </div>
                            </a>
                        </div>
                    </div>
            
                    <div class="ciudad fontLV" style="display: none">
                        <div class="lasVenturas">
                            <a href="LasVenturas.html">
                                <div id="descripcionLV">
                                    <img src="imagenes/lasVenturas.png" alt="letra las venturas" id="LVfuente">
                                    
                                    <p>Ciudad con mayor vida nocturna y viviendas lujosas. 
                                        Predominancia de hoteles y alquileres temporales para las personas poder
                                        que buscan disfrutar de las variadas actividades
                                        <br><br><u><b>ver propiedades en Las Venturas</b></u>
                                    </p>
                                </div>
                            </a>
                        </div>
                    </div>
                </div> -->

            </div>

        </div>
    </div>

            
    <div class="panel-lateral">
        <button id="desplegable" onclick="despliega()" type="button">
            <img src="imagenes/double_arrow_icon.png" alt="flecha doble" id="arrow">
        </button>
        <!-- contenido del panel: -->
        
        <!-- barra de propiedades en favoritos -->
        <div class="propsFavsContainer">
            <div class="panelTexts">
                <p id="propsFavoritas">propiedades favoritas (actualmente <b id="cantPropsFavs">0</b>) </p> 
                <p class="trianguloDesplegable" onclick="showContent(this)">▲</p>
            </div>
            <div class="contenidoDesplegado">
                <p class="contenidoVacio">No hay propiedades favoritas.</p>
            </div>

        </div>
        <!-- conversor de moneda -->
        <div class="conversorContainer">
            <div class="panelTexts">
                <p class="opcionPanel">Conversor</p>
                <p class="trianguloDesplegable" onclick="showContent(this)">▲</p>
            </div>
            <div class="contenidoDesplegado">
                
                <div id="conversorMoneda">
                    <div id="moneda1Container">
                        <input type="text" name="monedaValue1" id="monedaValue1" size="12" placeholder="1 ARS = 0.59 USD" onkeyup="conversor(this)">
                    </div>
                    
                    <div id="reversoMonedas">
                        <span>
                            ↕                       
                        </span>
                    </div>

                    <div id="moneda2Container">
                        <!-- <label for="">moneda2</label> -->
                        <form id="moneda2Form">
                            <select name="moneda2" id="moneda2" onchange="conversor(this)">
                                <option value="Dolar">Dolar</option>
                                <option value="Peso">Peso</option>
                            </select>
                            <input type="text" name="monedaValue2" id="monedaValue2" size="12" placeholder="1 USD = 1.7 ARS" onkeyup="conversor(this)">
                        </form>
                    </div>

                </div>
                
            </div>
        </div>

        <!-- mensajes -->
        <div class="mensajesContainer">
            <div class="panelTexts">
                <p class="opcionPanel">Mensajes <sup><span id="avisoMSJ"> &nbsp; &nbsp; &nbsp;</span></sup></p>
                <p class="trianguloDesplegable" onclick="showContent(this)">▲</p>
            </div>
            <div class="contenidoDesplegado">
                <p class="contenidoVacio">No hay mensajes.</p>
            </div>
        </div>
        
        <!-- novedades -->
        <div class="novedadesContainer">
            <div class="panelTexts">
                <p class="opcionPanel" id="novedadesText">Novedades</p>
                <p class="trianguloDesplegable" onclick="showContent(this)">▲</p>
            </div>
            <div class="contenidoDesplegado">
                <p class="contenidoVacio">No hay novedades.</p>
            </div>
        </div>
    </div>

    <div class="userView">
    </div>

<footer>
    <div class="TermsYcond">
        <a href="https://pedco.uncoma.edu.ar/mod/page/view.php?id=6882">Términos y condiciones</a>
    </div>
    <div class="logos">
        <a href="https://github.com/DiegoMarchandon">
            <img src="imagenes/GITHUBlogo.png" alt="imagen github">
        </a>
    </div>
</footer>
<script type="module">
    const formularioSubmit = document.getElementById('searchForm');

    import { verPropuesta, autocompletado } from './home.js';
    import { despliega, showContent, conversor } from './viewScripts.js';
    import { userConectado, userDesconect } from './validacionForms.js';
    window.verPropuesta = verPropuesta;
    window.despliega = despliega;
    window.showContent = showContent;
    window.conversor = conversor;
    window.userConectado = userConectado;
    window.userDesconect = userDesconect;
    window.autocompletado = autocompletado;
    document.addEventListener('DOMContentLoaded', function(){
        var sesion = document.getElementsByClassName('admSesion')[0];
    // si la clave usuarioRegistrado guarda el valor true:
    if(localStorage.getItem('usuarioRegistrado') === 'true'){
        const usuarioRef = userConectado();
        sesion.innerText = 'Bienvenido ' + usuarioRef['Username'];
        document.querySelector('.panel-lateral').style.display = 'block';
    }else{
        document.querySelector('.panel-lateral').style.display = 'none';
        sesion.innerText = 'Iniciar Sesión';
    }
    sesion.addEventListener('click',function(){
        if(localStorage.getItem('usuarioRegistrado') === 'true'){
            localStorage.setItem('usuarioRegistrado','false');
            userDesconect();
        }
    })

    formularioSubmit.addEventListener('submit',function(event){
        event.preventDefault();
        var cityRef = document.getElementById('ciudadOption').value; 
        // console.log("submit presionado");
        window.location.href = 'propiedades.html';
        console.log(document.getElementById('eleccion').value);
        console.log(document.getElementById('ciudadOption').value);
        localStorage.setItem('zonaSugerida',(document.getElementById('eleccion').value));
        if(cityRef === 'Todas las localidades'){
            cityRef = 'Todas';
        }
        localStorage.setItem('seleccionRealizada',cityRef);
    });

    autocompletado(document.getElementById('eleccion'));
    });
    
</script>
</body>
</html>